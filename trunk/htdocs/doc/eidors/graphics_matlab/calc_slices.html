<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of calc_slices</title>
  <meta name="keywords" content="calc_slices">
  <meta name="description" content="calc_slices (img, levels, clim  ) show slices at levels of an">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html eidors --><!-- menu.html graphics_matlab -->
<h1>calc_slices
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>calc_slices (img, levels, clim  ) show slices at levels of an</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function rimg = calc_slices( img, levels ); </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> calc_slices (img, levels, clim  ) show slices at levels of an
             using a fast rendering algorithm
 img    = EIDORS image struct, or array of I images
 levels = Matrix [Lx3] of L image levels
          each row of the matrix specifies the intercepts
          of the slice on the x, y, z axis. To specify a z=2 plane
          parallel to the x,y: use levels= [inf,inf,2]

 if levels is scalar, then make levels equispaced horizontal
          cuts through the object

 PARAMETERS:
   img.calc_slices.filter % Filter to be applied to images
      Example:    img.calc_slices.filter = ones(3)/9
   img.calc_slices.scale  % Scaling to apply to images
   img.calc_slices.levels % an alternative way to specify levels

 rimg= np x np x I x L where np is 128 by default
 np can be adjusted by calc_colours('npoints')</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../eidors/algorithms/calc_jacobian_bkgnd.html" class="code" title="function img_bkgnd = calc_jacobian_bkgnd( inv_model )">calc_jacobian_bkgnd</a>	CALC_JACOBIAN_BKGND: calculate background image around</li><li><a href="../../eidors/algorithms/get_img_data.html" class="code" title="function [img_data, n_images]= get_img_data(img)">get_img_data</a>	GET_IMG_DATA: get parameter data from eidors image object</li><li><a href="../../eidors/eidors_msg.html" class="code" title="function log_level= eidors_msg( message, varargin )">eidors_msg</a>	EIDORS_MSG: eidors progress and status messages</li><li><a href="calc_colours.html" class="code" title="function [colours,scl_data]= calc_colours(img, set_value, do_colourbar)">calc_colours</a>	[colours,scl_data]= calc_colours(img, set_value, do_colourbar)</li><li><a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>	calc_slices (img, levels, clim  ) show slices at levels of an</li><li><a href="mdl_slice_mapper.html" class="code" title="function map = mdl_slice_mapper( fmdl, maptype );">mdl_slice_mapper</a>	MDL_SLICE_MAPPER: map pixels to FEM elements or nodes</li><li><a href="../../eidors/mk_image.html" class="code" title="function img= mk_image(mdl, elem_data, name)">mk_image</a>	MK_IMAGE: create eidors image object</li><li><a href="../../eidors/models/a_adler/mdl_dim.html" class="code" title="function num = mdl_dim( mdl );">mdl_dim</a>	MDL_DIM: dimension of model space (are nodes in 2D or 3D space)</li><li><a href="../../eidors/models/a_adler/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>	MK_COMMON_MODEL: make common EIT models</li><li><a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>	UNIT_TEST_CMP: compare matrices in eidors output</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../eidors/algorithms/a_adler/calc_posn_resolution.html" class="code" title="function [br,pos]= calc_posn_resolution( img, fwd_model)">calc_posn_resolution</a>	CALC_POSN_RESOLUTION: calculate posn and resolution of a target</li><li><a href="../../eidors/algorithms/a_adler/eval_GREIT_fig_merit.html" class="code" title="function params = eval_GREIT_fig_merit(imgs, xyzr_pt)">eval_GREIT_fig_merit</a>	EVAL_GREIT_FIG_MERIT: calculate GREIT figures of merit for images</li><li><a href="animate_reconstructions.html" class="code" title="function fname_out= animate_reconstructions(fname, imgs);">animate_reconstructions</a>	animate_reconstructions(fname, imgs);</li><li><a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>	calc_slices (img, levels, clim  ) show slices at levels of an</li><li><a href="show_3d_slices.html" class="code" title="function show_3d_slices(img, varargin);">show_3d_slices</a>	show_3d_slices(img, z_cuts, x_cuts, y_cuts)</li><li><a href="show_slices.html" class="code" title="function out_img= show_slices( img, levels )">show_slices</a>	out_img = show_slices (img, levels ) show slices at levels of an</li><li><a href="../../eidors/interface/igt2img.html" class="code" title="function img = igt2img(igt)">igt2img</a>	IGT2IMG constructs an EIDORS IMG struct from an IGT frames-by-912 matrix.</li><li><a href="../../eidors/interface/img2igt.html" class="code" title="function igt = img2igt(img)">img2igt</a>	IMG2IGT returns an IGT-compatible image matrix from any EIDORS</li><li><a href="../../eidors/tests/test_colour_direction.html" class="code" title="">test_colour_direction</a>	Test colour mapping</li><li><a href="../../eidors/tools/test_performance.html" class="code" title="function [r, params] =  test_performance( imdls, fmdl );">test_performance</a>	TEST_PERFORMANCE: test of difference reconstruction algorithms</li><li><a href="../../eidors/tools/test_performance_img.html" class="code" title="function [params_img] =  test_performance_img( imdls, fmdl );">test_performance_img</a>	TEST_PERFORMANCE: test of difference reconstruction algorithms</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function rimg = calc_this_slice( img, levels, np)</a></li><li><a href="#_sub2" class="code">function rimg= calc_image_nearestnodes( node_data, level, fwd_model, np);</a></li><li><a href="#_sub3" class="code">function rimg= calc_image_nodes( node_data, level, fwd_model, np)</a></li><li><a href="#_sub4" class="code">function rimg= calc_image_elems( elem_data, level, fwd_model, np)</a></li><li><a href="#_sub5" class="code">function  rimg = filter_image(rimg, filt);</a></li><li><a href="#_sub6" class="code">function do_unit_test</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function rimg = calc_slices( img, levels );</a>
0002 <span class="comment">% calc_slices (img, levels, clim  ) show slices at levels of an</span>
0003 <span class="comment">%             using a fast rendering algorithm</span>
0004 <span class="comment">% img    = EIDORS image struct, or array of I images</span>
0005 <span class="comment">% levels = Matrix [Lx3] of L image levels</span>
0006 <span class="comment">%          each row of the matrix specifies the intercepts</span>
0007 <span class="comment">%          of the slice on the x, y, z axis. To specify a z=2 plane</span>
0008 <span class="comment">%          parallel to the x,y: use levels= [inf,inf,2]</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% if levels is scalar, then make levels equispaced horizontal</span>
0011 <span class="comment">%          cuts through the object</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% PARAMETERS:</span>
0014 <span class="comment">%   img.calc_slices.filter % Filter to be applied to images</span>
0015 <span class="comment">%      Example:    img.calc_slices.filter = ones(3)/9</span>
0016 <span class="comment">%   img.calc_slices.scale  % Scaling to apply to images</span>
0017 <span class="comment">%   img.calc_slices.levels % an alternative way to specify levels</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% rimg= np x np x I x L where np is 128 by default</span>
0020 <span class="comment">% np can be adjusted by calc_colours('npoints')</span>
0021 
0022 <span class="comment">% (C) 2006 Andy Adler. License: GPL version 2 or version 3</span>
0023 <span class="comment">% $Id$</span>
0024 
0025 <span class="keyword">if</span> isstr(img) &amp;&amp; strcmp(img,<span class="string">'UNIT_TEST'</span>); <a href="#_sub6" class="code" title="subfunction do_unit_test">do_unit_test</a>; <span class="keyword">return</span>; <span class="keyword">end</span>
0026 
0027 np = <a href="calc_colours.html" class="code" title="function [colours,scl_data]= calc_colours(img, set_value, do_colourbar)">calc_colours</a>(<span class="string">'npoints'</span>);
0028 <span class="keyword">try</span>   np = img(1).calc_colours.npoints;
0029 <span class="keyword">end</span>
0030 
0031 <span class="keyword">if</span> nargin &lt; 2
0032     <span class="keyword">try</span> 
0033         levels = img.calc_slices.levels; 
0034     <span class="keyword">catch</span>
0035         levels = [];
0036     <span class="keyword">end</span>
0037 <span class="keyword">end</span>
0038 
0039 <span class="comment">% Assume all fwd_models are same dimension (all 3D or 2D no mixed dims)</span>
0040 <span class="keyword">if</span> <a href="../../eidors/models/a_adler/mdl_dim.html" class="code" title="function num = mdl_dim( mdl );">mdl_dim</a>(img(1))==2 
0041    <span class="keyword">if</span> nargin&gt;1 &amp;&amp; ~isempty(levels);
0042        <span class="keyword">if</span> ~all(levels(1,:) == [inf,inf,0])
0043           warning(<span class="string">'specified levels ignored for 2D FEM'</span>);
0044        <span class="keyword">end</span>
0045    <span class="keyword">end</span>
0046    levels= [Inf,Inf,0];
0047 <span class="keyword">elseif</span> <a href="../../eidors/models/a_adler/mdl_dim.html" class="code" title="function num = mdl_dim( mdl );">mdl_dim</a>(img(1))==3 &amp;&amp; isempty(levels)
0048    levels = [Inf Inf mean(img.fwd_model.nodes(:,3))];
0049    <a href="../../eidors/eidors_msg.html" class="code" title="function log_level= eidors_msg( message, varargin )">eidors_msg</a>(<span class="string">'calc_slices: no levels specified, assuming an xy plane'</span>,2);
0050 <span class="keyword">end</span>
0051 
0052 
0053 rimg = [];
0054 <span class="keyword">for</span> i=1:length(img)
0055    rimg = cat(3, rimg, <a href="#_sub1" class="code" title="subfunction rimg = calc_this_slice( img, levels, np)">calc_this_slice</a>( img(i), levels, np) );
0056 <span class="keyword">end</span>
0057 
0058 <a name="_sub1" href="#_subfunctions" class="code">function rimg = calc_this_slice( img, levels, np)</a>
0059     <span class="comment">% If scalar levels then we just create that many cut planes on z-dimension</span>
0060     fwd_model = img.fwd_model;
0061     <span class="keyword">if</span> size(levels)== [1,1]
0062        zmax= max(fwd_model.nodes(:,3));
0063        zmin= min(fwd_model.nodes(:,3));
0064        levels = linspace(zmin,zmax, levels+2);
0065        levels = levels(2:end-1)'*[Inf,Inf,1];
0066     <span class="keyword">end</span>
0067     num_levs= size(levels,1);
0068     <span class="keyword">if</span> isfield(img,<span class="string">'elem_data'</span>)
0069        [elem_data, n_images] = <a href="../../eidors/algorithms/get_img_data.html" class="code" title="function [img_data, n_images]= get_img_data(img)">get_img_data</a>(img);
0070        rimg=zeros(np,np,n_images,num_levs);
0071 
0072        <span class="keyword">for</span> lev_no = 1:num_levs
0073           level= levels( lev_no, 1:3 );
0074 
0075           rimg(:,:,:,lev_no) = <a href="#_sub4" class="code" title="subfunction rimg= calc_image_elems( elem_data, level, fwd_model, np)">calc_image_elems</a>( elem_data, level, fwd_model, np);
0076        <span class="keyword">end</span>
0077     <span class="keyword">elseif</span> isfield(img,<span class="string">'node_data'</span>)
0078        node_data= [img.node_data];
0079        <span class="keyword">if</span> size(node_data,1)==1; node_data=node_data';<span class="keyword">end</span>
0080        n_images= size(node_data,2);
0081        rimg=zeros(np,np,n_images,num_levs);
0082 
0083        <span class="keyword">for</span> lev_no = 1:num_levs
0084           level= levels( lev_no, 1:3 );
0085 
0086           rimg(:,:,:,lev_no) = <a href="#_sub3" class="code" title="subfunction rimg= calc_image_nodes( node_data, level, fwd_model, np)">calc_image_nodes</a>( node_data, level, fwd_model, np);
0087        <span class="keyword">end</span>
0088     <span class="keyword">else</span>
0089        error(<span class="string">'img does not have a data field'</span>);
0090     <span class="keyword">end</span>
0091 
0092     <span class="comment">% FILTER IMAGE</span>
0093     <span class="keyword">try</span>   filt = img.calc_slices.filter; 
0094     <span class="keyword">catch</span> filt = 1; <span class="keyword">end</span>
0095     <span class="keyword">try</span>   scal = img.calc_slices.scale; 
0096     <span class="keyword">catch</span> scal = 1; <span class="keyword">end</span>
0097 
0098     
0099     <span class="keyword">if</span> filt*scal ~= 1
0100        filt = scal * ( filt/sum(filt(:)) );
0101        rimg = <a href="#_sub5" class="code" title="subfunction  rimg = filter_image(rimg, filt);">filter_image</a>(rimg, filt);
0102     <span class="keyword">end</span>
0103 
0104 <span class="comment">% Calculate an image by mapping it onto the node_ptr matrix</span>
0105 <span class="comment">% This makes a blocky image to nearest node -&gt; no longer used</span>
0106 <a name="_sub2" href="#_subfunctions" class="code">function rimg= calc_image_nearestnodes( node_data, level, fwd_model, np);</a>
0107    fwd_model.mdl_slice_mapper.npx  = np;
0108    fwd_model.mdl_slice_mapper.npy  = np;
0109    fwd_model.mdl_slice_mapper.level= level;
0110    node_ptr = <a href="mdl_slice_mapper.html" class="code" title="function map = mdl_slice_mapper( fmdl, maptype );">mdl_slice_mapper</a>( fwd_model, <span class="string">'node'</span> );
0111 
0112    backgnd= NaN;
0113    n_images= size(node_data,2);
0114    rval= [backgnd*ones(1,n_images); node_data];
0115    rimg= reshape( rval(node_ptr+1,:), np,np, n_images );
0116 
0117 <span class="comment">% Calculate an image by interpolating it onto the elem_ptr matrix</span>
0118 <a name="_sub3" href="#_subfunctions" class="code">function rimg= calc_image_nodes( node_data, level, fwd_model, np)</a>
0119 
0120    fwd_model.mdl_slice_mapper.npx  = np;
0121    fwd_model.mdl_slice_mapper.npy  = np;
0122    fwd_model.mdl_slice_mapper.level= level;
0123 
0124    nd_interp= <a href="mdl_slice_mapper.html" class="code" title="function map = mdl_slice_mapper( fmdl, maptype );">mdl_slice_mapper</a>( fwd_model, <span class="string">'nodeinterp'</span> );
0125    elem_ptr = <a href="mdl_slice_mapper.html" class="code" title="function map = mdl_slice_mapper( fmdl, maptype );">mdl_slice_mapper</a>( fwd_model, <span class="string">'elem'</span> );
0126    [sx,sy]= size(elem_ptr);
0127 
0128    node_ptr = fwd_model.elems; node_ptr = [0*node_ptr(1,:);node_ptr];
0129    node_ptr = reshape( node_ptr( elem_ptr+1, :), sx, sy, []);
0130 
0131    n_images = size(node_data,2);
0132    rimg= zeros(sx, sy, n_images);
0133    backgnd= NaN;
0134    
0135    <span class="keyword">for</span> ni = 1:n_images
0136      znd = [backgnd;node_data(:,ni)]; <span class="comment">% add NaN for background</span>
0137      rimg(:,:,ni) = sum( znd(node_ptr+1) .* nd_interp, 3); 
0138    <span class="keyword">end</span>
0139 
0140 
0141 <span class="comment">% Calculate an image by mapping it onto the elem_ptr matrix</span>
0142 <a name="_sub4" href="#_subfunctions" class="code">function rimg= calc_image_elems( elem_data, level, fwd_model, np)</a>
0143 
0144    fwd_model.mdl_slice_mapper.npx  = np;
0145    fwd_model.mdl_slice_mapper.npy  = np;
0146    fwd_model.mdl_slice_mapper.level= level;
0147    elem_ptr = <a href="mdl_slice_mapper.html" class="code" title="function map = mdl_slice_mapper( fmdl, maptype );">mdl_slice_mapper</a>( fwd_model, <span class="string">'elem'</span> );
0148 
0149    backgnd= NaN;
0150    n_images= size(elem_data,2);
0151    rval= backgnd*ones(size(elem_data)+[1,0]);
0152    rval(2:<span class="keyword">end</span>,:) = elem_data;
0153    rimg= reshape( rval(elem_ptr+1,:), np,np, n_images );
0154 
0155 
0156 <a name="_sub5" href="#_subfunctions" class="code">function  rimg = filter_image(rimg, filt);</a>
0157    [sz1,sz2,sz3,sz4] = size(rimg);
0158    <span class="keyword">for</span> j1 = 1:sz3; <span class="keyword">for</span> j2 = 1:sz4; 
0159       rsl = rimg(:,:,j1,j2);
0160 
0161       rna = isnan(rsl);
0162       rsl(rna) = 0;
0163       rsl = conv2(rsl, filt, <span class="string">'same'</span>);
0164       rsl(rna) = NaN;
0165 
0166       rimg(:,:,j1,j2) = rsl;
0167    <span class="keyword">end</span>; <span class="keyword">end</span>
0168 
0169 <a name="_sub6" href="#_subfunctions" class="code">function do_unit_test</a>
0170    img = <a href="../../eidors/mk_image.html" class="code" title="function img= mk_image(mdl, elem_data, name)">mk_image</a>( <a href="../../eidors/models/a_adler/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'a2c2'</span>,8));
0171    img.calc_colours.npoints = 8; 
0172 
0173    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img);
0174    imt = NaN*ones(8); imt(3:6,2:7) = 1; imt(2:7,3:6) = 1; 
0175    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 1'</span>, imc, imt);
0176 
0177    imn = rmfield(img,<span class="string">'elem_data'</span>);
0178    imn.node_data = ones(size(imn.fwd_model.nodes,1),1);
0179    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(imn);
0180    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 2'</span>, imc, imt, 1e-14);
0181 
0182    img.elem_data(1:4) = 2;
0183    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img);
0184    imt(3:6,3:6) = 1; imt(4:5,4:5) = 2; 
0185    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 3'</span>, imc, imt);
0186 
0187    imn.node_data(1:5) = 2;
0188    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(imn);
0189    imt(3:6,3:6) = 1; imt(4:5,3:6) = 1.049020821501088;
0190    imt(3:6,4:5) = 1.049020821501088; imt(4:5,4:5) = 2;
0191    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 4'</span>, imc, imt, 1e-14);
0192 
0193    imn.node_data(:) = 1; imn.node_data(1) = 4;
0194    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(imn);
0195    imt(3:6,3:6) = 1; imt(4:5,4:5) = 1.575633893074693; 
0196    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 5'</span>, imc, imt, 1e-14);
0197 
0198    imn.calc_colours.npoints = 7; 
0199    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(imn);
0200    imt = NaN*ones(7); imt(2:6,2:6) = 1; imt(4,1:7)= 1; imt(1:7,4)= 1;imt(4,4) = 4; 
0201    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 2d 6'</span>, imc, imt, 1e-14);
0202 
0203 
0204 <span class="comment">% 3D Tests</span>
0205    img = <a href="../../eidors/algorithms/calc_jacobian_bkgnd.html" class="code" title="function img_bkgnd = calc_jacobian_bkgnd( inv_model )">calc_jacobian_bkgnd</a>( <a href="../../eidors/models/a_adler/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'n3r2'</span>));
0206    img.calc_colours.npoints = 8; 
0207    imn = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img,[inf,inf,1]);
0208 
0209    imt = NaN*ones(8); imt(3:6,2:7) = 1; imt(2:7,3:6) = 1; 
0210    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 3d 1'</span>, imn, imt);
0211 
0212    imn = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img,[inf,0,inf]);
0213    imt = NaN*ones(8); imt(1:8,3:6) = 1; 
0214    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 3d 2'</span>, imn, imt);
0215 
0216    <span class="comment">% Should have no effect</span>
0217    img.fwd_model.nodes(:,3) = img.fwd_model.nodes(:,3)-1;
0218    imn = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img,[inf,0,inf]); 
0219    imt = NaN*ones(8); imt(1:8,3:6) = 1; 
0220    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs 3d 3'</span>, imn, imt);
0221 
0222 
0223 <span class="comment">% multi image struct</span>
0224    img = <a href="../../eidors/mk_image.html" class="code" title="function img= mk_image(mdl, elem_data, name)">mk_image</a>( <a href="../../eidors/models/a_adler/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'a2c2'</span>,8));
0225    img.calc_colours.npoints = 8; 
0226    img(2) = img;
0227    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img); 
0228    imt = NaN*ones(8); imt(3:6,2:7) = 1; imt(2:7,3:6) = 1; 
0229    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs mult 1'</span>, imc, cat(3,imt,imt));
0230 
0231    imgb = <a href="../../eidors/mk_image.html" class="code" title="function img= mk_image(mdl, elem_data, name)">mk_image</a>( <a href="../../eidors/models/a_adler/mk_common_model.html" class="code" title="function inv_mdl= mk_common_model( str, n_elec, varargin )">mk_common_model</a>(<span class="string">'b2c2'</span>,8));
0232    imgb.calc_colours.npoints = 8; 
0233    img(3)=imgb;
0234    imc = <a href="calc_slices.html" class="code" title="function rimg = calc_slices( img, levels );">calc_slices</a>(img); 
0235    <a href="../../eidors/tools/unit_test_cmp.html" class="code" title="function unit_test_cmp(txt,a,b,tol)">unit_test_cmp</a>(<span class="string">'cs mult 2'</span>, imc, cat(3,imt,imt,imt));
0236</pre></div>
<hr><address>Generated on Wed 13-Jul-2011 23:23:10 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>