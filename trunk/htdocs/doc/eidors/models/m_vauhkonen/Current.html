<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of Current</title>
  <meta name="keywords" content="Current">
  <meta name="description" content="Current Supplies some current patterns for 2D EIT">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html eidors --><!-- # models --><!-- menu.html m_vauhkonen -->
<h1>Current
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>Current Supplies some current patterns for 2D EIT</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [I,T]=Current(L,lg,style,rms,numpat); </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">Current Supplies some current patterns for 2D EIT
 Function [I,T]=Current(L,lg,style,rms,numpat) calculates 
 different current patterns. The 'style' can be 'tri' (trigonometric), 
 'adj' (adjacent), 'opp' (opposite) or 'ref' (one reference). 

 INPUT

 L = the number of electrodes
 lg = the number of nodes
 style = 'tri' (trigonometric), 'adj' (adjacent), 'opp' (opposite) or 'ref' (one reference)
 rms = the root mean square value of the injected current. Default=1 (optional).
 numpat = the number of patterns (optional, in certain cases forced to be L-1)

 OUTPUT

 I = the total current matrix, internal and on the electrodes 
 T = currents on the electrodes</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../eidors/algorithms/m_vauhkonen/FemMatrix.html" class="code" title="function [Agrad,Kb,M,S,C]=FemMatrix(Node,Element,z);">FemMatrix</a>	FemMatrix Computes the blocks of the system matrix for 2D EIT with linear and quadratic basis</li><li><a href="../../../eidors/algorithms/m_vauhkonen/FemMatrixNode.html" class="code" title="function [Agrad,Kb,M,S,C]=FemMatrixNode(Node,Element,z);">FemMatrixNode</a>	FemMatrixNode Computes the blocks of the system matrix for 2D EIT with linear and quadratic basis. Conductivity in linear basis.</li><li><a href="../../../eidors/examples/eidors2d_demo1.html" class="code" title="">eidors2d_demo1</a>	EidorsDemo1 Demonstrates the use of 2D EIT Package with linear basis</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [I,T]=Current(L,lg,style,rms,numpat);</a>
0002 
0003 <span class="comment">%Current Supplies some current patterns for 2D EIT</span>
0004 <span class="comment">% Function [I,T]=Current(L,lg,style,rms,numpat) calculates</span>
0005 <span class="comment">% different current patterns. The 'style' can be 'tri' (trigonometric),</span>
0006 <span class="comment">% 'adj' (adjacent), 'opp' (opposite) or 'ref' (one reference).</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% INPUT</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% L = the number of electrodes</span>
0011 <span class="comment">% lg = the number of nodes</span>
0012 <span class="comment">% style = 'tri' (trigonometric), 'adj' (adjacent), 'opp' (opposite) or 'ref' (one reference)</span>
0013 <span class="comment">% rms = the root mean square value of the injected current. Default=1 (optional).</span>
0014 <span class="comment">% numpat = the number of patterns (optional, in certain cases forced to be L-1)</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% OUTPUT</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% I = the total current matrix, internal and on the electrodes</span>
0019 <span class="comment">% T = currents on the electrodes</span>
0020 
0021 <span class="comment">% M. Vauhkonen 6.9.1994. Modified 13.9.1994 for NOSER.</span>
0022 <span class="comment">% Modified 13.8.1999 by M. Vauhkonen,</span>
0023 <span class="comment">% University of Kuopio, Department of Applied Physics, PO Box 1627,</span>
0024 <span class="comment">% FIN-70211 Kuopio, Finland, email: Marko.Vauhkonen@uku.fi</span>
0025 
0026 
0027 <span class="keyword">if</span> nargin &lt; 4 &amp; style == <span class="string">'tri'</span>
0028  rms=1;
0029  numpat=L-1;
0030 <span class="keyword">end</span>
0031 
0032 <span class="keyword">if</span> nargin &lt; 4 &amp; style ~= <span class="string">'tri'</span>
0033  rms=1;
0034  numpat=L;
0035 <span class="keyword">end</span>
0036 
0037 <span class="keyword">if</span> nargin == 4 &amp; style == <span class="string">'tri'</span>
0038  numpat=L-1;
0039 <span class="keyword">end</span>
0040 
0041 <span class="keyword">if</span> nargin == 4 &amp; style ~= <span class="string">'tri'</span>
0042  numpat=L;
0043 <span class="keyword">end</span>
0044 
0045 
0046 <span class="keyword">switch</span> style
0047 <span class="keyword">case</span> <span class="string">'tri'</span>
0048 <span class="keyword">if</span> numpat &gt; L-1,
0049   str=[<span class="string">'Too many current patterns. Automatically set to '</span>, num2str(L-1),<span class="string">'.'</span> ];
0050   disp(str)
0051   numpat =L-1;
0052  <span class="keyword">end</span>
0053 II=zeros(L,numpat);
0054 l=(1:L)';
0055 th=2*pi*l/L;
0056  <span class="keyword">for</span> k=1:(numpat+1)/2,
0057   II(:,k)=rms*cos(k*th);
0058  <span class="keyword">end</span>
0059  <span class="keyword">for</span> k=(numpat+1)/2+1:numpat
0060   II(:,k)=rms*sin((k-L/2)*th);
0061  <span class="keyword">end</span>
0062 I=[zeros(lg,numpat);II];
0063 T=II;
0064 
0065 <span class="keyword">case</span> <span class="string">'adj'</span>
0066 II=zeros(L,numpat);
0067 l=(1:L)';
0068 II1=diag(ones(L,1));
0069 II2=diag(ones(L-1,1),-1);
0070 <span class="keyword">if</span> numpat &lt; L
0071  II=II1(:,1:numpat)-II2(:,1:numpat);
0072 <span class="keyword">else</span>
0073  II=II1(:,1:numpat-1)-II2(:,1:numpat-1);
0074  II=[II,[-1;zeros(L-2,1);1]];<span class="comment">% Optional!!</span>
0075 <span class="keyword">end</span>
0076 I=[zeros(lg,numpat);rms*II];
0077 T=II;
0078 
0079 <span class="keyword">case</span> <span class="string">'ref'</span>
0080  <span class="keyword">if</span> numpat &gt; L-1, 
0081   str=[<span class="string">'Too many current patterns. Automatically set to '</span>, num2str(L-1),<span class="string">'.'</span> ];
0082   disp(str)
0083   numpat =L-1;
0084  <span class="keyword">end</span>
0085 II=zeros(L,numpat);
0086 II1=diag(ones(L-1,1),-1);
0087 II(1,:)=ones(1,numpat);
0088 T=II-II1(:,1:numpat);
0089 I=[zeros(lg,numpat);rms*T];
0090 
0091 
0092 <span class="keyword">case</span> <span class="string">'opp'</span>
0093 <span class="keyword">if</span> numpat &gt; L/2, 
0094 str=[<span class="string">'Too many current patterns. Automatically set to '</span>, num2str(L/2),<span class="string">'.'</span> ];
0095   disp(str)
0096 numpat=L/2;<span class="keyword">end</span>
0097 II=zeros(L,numpat);
0098 l=(1:L)';
0099 II1=diag(ones(L,1));
0100 II2=diag(ones(L,1),-L/2);
0101 II=II1(:,1:numpat)-II2(1:L,1:numpat);
0102 <span class="comment">%II=[II(:,1:ceil(numpat/2)),-II(:,1:floor(numpat/2))];% Optional!!</span>
0103 I=[zeros(lg,numpat);rms*II];
0104 T=II;
0105 <span class="keyword">end</span>
0106 
0107 
0108 
0109 
0110 
0111 
0112 
0113 
0114 
0115 
0116</pre></div>
<hr><address>Generated on Wed 13-Jul-2011 23:23:10 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>